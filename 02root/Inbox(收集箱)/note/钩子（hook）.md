#gemini
好的，您对“启动模板”的理解非常准确！它就是一个在后台默默工作的“初始化脚本”，专门用来**设置自动化规则**和**定义可复用的功能**。

把它想象成一个“幕后管家”。当您每天早上“启动”Obsidian 这个家时，这个管家就立刻开始工作，把各种自动化规则都准备好，让您在接下来的一天里使用起来更顺手。

既然它不直接输出内容，那它到底能做什么强大的功能呢？核心就是您提到的：**为 Obsidian 的事件添加钩子 (hook)**。

这意味着，您可以编写一个规则，告诉 Templater：“**当 [某个事件] 发生时，自动执行 [某个动作]**”。

下面是一些非常实用和酷炫的功能，您可以通过“启动模板”来实现：

---

### 1. 自动化文件管理 (Automated File Management)

这是最常用也最强大的功能之一。您可以让 Obsidian 变成一个自组织的智能系统。

- **场景一：根据标题自动移动新笔记**
    
    - **事件**: 创建一个新文件时 (`file-create`)。
    - **动作**: 检查新文件的标题。如果标题包含“会议纪要”，就自动把它移动到 `/Meetings` 文件夹；如果标题包含“读书笔记”，就移动到 `/Books` 文件夹。
    - **好处**: 您再也不用手动整理笔记了，知识库永远保持井井有条。
- **场景二：根据标签自动归档**
    
    - **事件**: 修改一个文件时 (`file-modify`)。
    - **动作**: 检查文件内容。当您给一篇笔记打上 `#archive` 标签并保存时，脚本会自动将该文件移动到 `/Archive` 文件夹。
    - **好处**: 只需一个标签，就能完成归档操作，极其高效。

### 2. 动态更新元数据 (Dynamic Metadata Updates)

您可以让笔记的元数据（Frontmatter）始终保持最新状态，无需手动维护。

- **场景：自动更新“修改日期”**
    
    - **事件**: 保存一个文件时 (`file-modify`)。
    - **动作**: 自动在笔记的 Frontmatter 中查找 `modified_date` 字段，并将其更新为当前日期和时间。
    - **好处**: 您可以精确地追踪每篇笔记的最后修改时间，对于项目管理和回顾非常有帮助。
- **场景：根据文件夹自动添加标签**
    
    - **事件**: 创建一个新文件时 (`file-create`)。
    - **动作**: 检查文件所在的文件夹。如果文件是在 `/Projects` 文件夹下创建的，自动为其 Frontmatter 添加 `tags: [project]`。
    - **好处**: 保证了分类的统一性，方便您使用标签进行全局搜索和筛选。

### 3. 创建可复用的自定义函数 (Advanced)

这是“启动模板”最高级也最能体现效率的用法。您可以在启动时定义一些复杂的函数，然后在您**所有其他普通模板**中轻松调用它们。

- **场景：定义一个“获取豆瓣读书信息”的函数**
    - **启动模板的动作**: 定义一个名为 `fetchBookInfo(isbn)` 的函数。这个函数可以连接到豆瓣API，根据书的ISBN号获取书名、作者、封面、评分等信息。并把这个函数注册到 Templater 的用户函数 `tp.user` 下。
    - **普通模板的使用**: 当您想创建一篇读书笔记时，只需在模板中写下 `<% tp.user.fetchBookInfo("9787532707833") %>`。
    - **好处**: 将复杂的逻辑（如API请求）封装起来，让您的日常模板变得极其简洁和强大。您只需输入一个ISBN号，所有信息都会自动填充。

### 4. 增强工作流 (Workflow Enhancement)

您可以根据自己的工作习惯，打造独一无二的自动化流程。

- **场景：创建项目笔记时，自动建立配套文件夹**
    - **事件**: 当一个标题以 `Project:` 开头的新笔记被创建时。
    - **动作**: 不仅创建这篇笔记，还在其所在位置自动创建 `/assets`、`/meetings`、`/drafts` 等一系列子文件夹。
    - **好处**: 一键生成完整的项目结构，让您立刻进入工作状态。

---

### 如何开始：一个简单的例子

您可以创建一个名为 `automation/startup.md` 的模板文件，然后在 Templater 设置中，将这个文件路径填入“Startup templates”配置项里。

下面是一个**自动更新修改日期**的简单脚本，您可以放在 `startup.md` 文件里：

JavaScript

```
<%*
// 监听 Obsidian 的工作区事件
app.workspace.on('file-modify', (file) => {
    // 获取当前活动的文件
    const activeFile = app.workspace.getActiveFile();
    
    // 确保被修改的文件就是当前打开的文件
    if (activeFile && activeFile.path === file.path) {
        
        // 使用 Templater 的 frontmatter 处理功能
        // 在文件的元数据中更新或添加 modified_date 字段
        tp.frontmatter.set("modified_date", tp.date.now("YYYY-MM-DD HH:mm:ss"));
        
        // (可选) 发送一个短暂的通知
        new Notice("Modified date updated!", 1000);
    }
});
%>
```

**总结一下：**

“启动模板”功能是 Templater 的“大脑”，它让您从一个**被动的内容插入者**，变成一个**主动的规则制定者**。通过它，您可以将 Obsidian 从一个强大的笔记软件，改造成一个真正属于您个人的、高度自动化的知识处理系统。